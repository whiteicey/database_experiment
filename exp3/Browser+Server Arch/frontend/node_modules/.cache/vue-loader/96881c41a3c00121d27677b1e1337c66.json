{"remainingRequest":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue","mtime":1638102484272},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1638090762101},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/babel-loader/lib/index.js","mtime":1638090762809},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1638090762101},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1638090762770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IEVsQnV0dG9uLCBFbElucHV0LCBFbFRhYmxlLCBFbFRhYmxlQ29sdW1uLCBFbEZvcm0sIEVsRm9ybUl0ZW0sIEVsTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtcGx1cycKCi8vIGNvbWJpbmUgMiBhcnJheXMgb2Ygc3RyaW5ncyBhcyBhIGpzb24gb2JqZWN0CmZ1bmN0aW9uIGNvbWJpbmVKU09OKGNvbHMsIHJvdykgewogIHZhciBqc29uc3RyID0gJ3snOwogIHZhciBpID0gMDsKICBjb25zdCBzeiA9IGNvbHMubGVuZ3RoCiAgZm9yICg7IGkgPCBzejsgKytpKSB7CiAgICBpZiAoaSAhPSAwKSBqc29uc3RyICs9ICcgLCAnCiAgICBqc29uc3RyICs9ICciJyArIGNvbHNbaV0gKyAnIjoiJyArIHJvd1tpXSArICciJwogIH0KICBqc29uc3RyICs9ICd9JwogIHJldHVybiBKU09OLnBhcnNlKGpzb25zdHIpCn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBFbEJ1dHRvbiwgRWxJbnB1dCwgRWxUYWJsZSwgRWxUYWJsZUNvbHVtbiwgRWxGb3JtLCBFbEZvcm1JdGVtCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgU1FMU3RhdGVtZW50OiAnJywKICAgICAgcm93czogW10sCiAgICAgIGNvbHM6IFtdLAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZXhlY3V0ZSgpIHsKICAgICAgaWYgKHRoaXMuU1FMU3RhdGVtZW50LnRyaW0oKS5sZW5ndGggPT0gMCkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcignU1FM6K+t5Y+l5LiN6IO95Li656m6JykKICAgICAgICByZXR1cm4KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF4aW9zLmdldCgnL2FwaS9zcWwnLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgc3FsOiB0aGlzLlNRTFN0YXRlbWVudAogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJykKICAgICAgICAgIC8vIFByb2Nlc3MgZGF0YSwgbWFrZSBpdCBhY2NldGFibGUgZm9yIGVsZW1lbnQtcGx1cwogICAgICAgICAgLy8gQXZvaWQgaW5jb25zaXN0ZW50IGRhdGEgd2l0aCBhIHRlbXBvcmFyeSB2YXJpYWJsZQogICAgICAgICAgdmFyIF90YWJsZSA9IHsKICAgICAgICAgICAgY29sczogW10sCiAgICAgICAgICAgIHJvd3M6IFtdCiAgICAgICAgICB9CiAgICAgICAgICAvLyBHZW5lcmF0ZSBjb2x1bW4gZGF0YQogICAgICAgICAgX3RhYmxlLmNvbHMgPSByZXNwb25zZS5kYXRhLmNvbHVtbkluZm9zLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lCiAgICAgICAgICB9KQogICAgICAgICAgLy8gR2VuZXJhdGUgcm93cwogICAgICAgICAgLy8gJ29mJyBub3QgJ2luJywgdGhlIGxhdHRlciB1c2VzIGluZGV4ZXMKICAgICAgICAgIGZvcih2YXIgcm93IG9mIHJlc3BvbnNlLmRhdGEucm93cykgewogICAgICAgICAgICBfdGFibGUucm93cy5wdXNoKGNvbWJpbmVKU09OKF90YWJsZS5jb2xzLCByb3cpKQogICAgICAgICAgfQogICAgICAgICAgLy8gQXBwbHkgY2hhbmdlcwogICAgICAgICAgdGhpcy5yb3dzID0gX3RhYmxlLnJvd3MKICAgICAgICAgIHRoaXMuY29scyA9IF90YWJsZS5jb2xzCiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfmk43kvZzlpLHotKXvvJonICsgZXJyLnJlc3BvbnNlLmRhdGEpCiAgICAgICAgICBjb25zb2xlLmxvZygn6ZSZ6K+v57uG6IqC77yaXG4nICsgZXJyICsgJ1xuJyArIGVyci5yZXNwb25zZS5kYXRhKQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue"],"names":[],"mappings":"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","file":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue","sourceRoot":"","sourcesContent":["<template>\n  <el-table :data='rows' style='margin:20px'>\n    <el-table-column v-for='col in cols'\n      :key='col'\n      :prop='col'\n      :label='col'\n    />\n  </el-table>\n\n  <!-- Default behavior of native enter event is refresh. We'd to prevent it -->\n  <!-- DAMN WHICH F**CKING IDIOT DESIGNED THIS STUPID BEHAVIOR?! -->\n  <el-form style='margin:0px 20px 20px 20px'>\n    <el-form-item label='SQL语句'>\n      <el-input v-model='SQLStatement'\n        placeholder='在此输入SQL语句，按下Ctrl+Enter执行'\n        type='textarea'\n        resize='none'\n        :autosize='{ minRows:4, maxRows: 128 }'\n        @keydown.enter.ctrl='execute'\n      />\n    </el-form-item>\n    <el-form-item>\n      <el-button @click='execute'>执行</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { ElButton, ElInput, ElTable, ElTableColumn, ElForm, ElFormItem, ElMessage } from 'element-plus'\n\n// combine 2 arrays of strings as a json object\nfunction combineJSON(cols, row) {\n  var jsonstr = '{';\n  var i = 0;\n  const sz = cols.length\n  for (; i < sz; ++i) {\n    if (i != 0) jsonstr += ' , '\n    jsonstr += '\"' + cols[i] + '\":\"' + row[i] + '\"'\n  }\n  jsonstr += '}'\n  return JSON.parse(jsonstr)\n}\n\nexport default {\n  components: {\n    ElButton, ElInput, ElTable, ElTableColumn, ElForm, ElFormItem\n  },\n  data() {\n    return {\n      SQLStatement: '',\n      rows: [],\n      cols: [],\n    }\n  },\n  methods: {\n    execute() {\n      if (this.SQLStatement.trim().length == 0) {\n        ElMessage.error('SQL语句不能为空')\n        return\n      } else {\n        this.axios.get('/api/sql', {\n          params: {\n            sql: this.SQLStatement\n          }\n        }).then((response) => {\n          ElMessage.success('操作成功')\n          // Process data, make it accetable for element-plus\n          // Avoid inconsistent data with a temporary variable\n          var _table = {\n            cols: [],\n            rows: []\n          }\n          // Generate column data\n          _table.cols = response.data.columnInfos.map((item) => {\n            return item.name\n          })\n          // Generate rows\n          // 'of' not 'in', the latter uses indexes\n          for(var row of response.data.rows) {\n            _table.rows.push(combineJSON(_table.cols, row))\n          }\n          // Apply changes\n          this.rows = _table.rows\n          this.cols = _table.cols\n        }).catch((err) => {\n          ElMessage.error('操作失败：' + err.response.data)\n          console.log('错误细节：\\n' + err + '\\n' + err.response.data)\n        })\n      }\n    }\n  }\n}\n</script>\n"]}]}