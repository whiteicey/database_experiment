{"remainingRequest":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue?vue&type=template&id=f2aae5e6","dependencies":[{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue","mtime":1638102484272},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1638090762101},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/babel-loader/lib/index.js","mtime":1638090762809},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1638090763449},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1638090762101},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1638090762770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGVsLXRhYmxlIDpkYXRhPSdyb3dzJyBzdHlsZT0nbWFyZ2luOjIwcHgnPgogICAgPGVsLXRhYmxlLWNvbHVtbiB2LWZvcj0nY29sIGluIGNvbHMnCiAgICAgIDprZXk9J2NvbCcKICAgICAgOnByb3A9J2NvbCcKICAgICAgOmxhYmVsPSdjb2wnCiAgICAvPgogIDwvZWwtdGFibGU+CgogIDwhLS0gRGVmYXVsdCBiZWhhdmlvciBvZiBuYXRpdmUgZW50ZXIgZXZlbnQgaXMgcmVmcmVzaC4gV2UnZCB0byBwcmV2ZW50IGl0IC0tPgogIDwhLS0gREFNTiBXSElDSCBGKipDS0lORyBJRElPVCBERVNJR05FRCBUSElTIFNUVVBJRCBCRUhBVklPUj8hIC0tPgogIDxlbC1mb3JtIHN0eWxlPSdtYXJnaW46MHB4IDIwcHggMjBweCAyMHB4Jz4KICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9J1NRTOivreWPpSc+CiAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPSdTUUxTdGF0ZW1lbnQnCiAgICAgICAgcGxhY2Vob2xkZXI9J+WcqOatpOi+k+WFpVNRTOivreWPpe+8jOaMieS4i0N0cmwrRW50ZXLmiafooYwnCiAgICAgICAgdHlwZT0ndGV4dGFyZWEnCiAgICAgICAgcmVzaXplPSdub25lJwogICAgICAgIDphdXRvc2l6ZT0neyBtaW5Sb3dzOjQsIG1heFJvd3M6IDEyOCB9JwogICAgICAgIEBrZXlkb3duLmVudGVyLmN0cmw9J2V4ZWN1dGUnCiAgICAgIC8+CiAgICA8L2VsLWZvcm0taXRlbT4KICAgIDxlbC1mb3JtLWl0ZW0+CiAgICAgIDxlbC1idXR0b24gQGNsaWNrPSdleGVjdXRlJz7miafooYw8L2VsLWJ1dHRvbj4KICAgIDwvZWwtZm9ybS1pdGVtPgogIDwvZWwtZm9ybT4K"},{"version":3,"sources":["/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue"],"names":[],"mappings":"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","file":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue","sourceRoot":"","sourcesContent":["<template>\n  <el-table :data='rows' style='margin:20px'>\n    <el-table-column v-for='col in cols'\n      :key='col'\n      :prop='col'\n      :label='col'\n    />\n  </el-table>\n\n  <!-- Default behavior of native enter event is refresh. We'd to prevent it -->\n  <!-- DAMN WHICH F**CKING IDIOT DESIGNED THIS STUPID BEHAVIOR?! -->\n  <el-form style='margin:0px 20px 20px 20px'>\n    <el-form-item label='SQL语句'>\n      <el-input v-model='SQLStatement'\n        placeholder='在此输入SQL语句，按下Ctrl+Enter执行'\n        type='textarea'\n        resize='none'\n        :autosize='{ minRows:4, maxRows: 128 }'\n        @keydown.enter.ctrl='execute'\n      />\n    </el-form-item>\n    <el-form-item>\n      <el-button @click='execute'>执行</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { ElButton, ElInput, ElTable, ElTableColumn, ElForm, ElFormItem, ElMessage } from 'element-plus'\n\n// combine 2 arrays of strings as a json object\nfunction combineJSON(cols, row) {\n  var jsonstr = '{';\n  var i = 0;\n  const sz = cols.length\n  for (; i < sz; ++i) {\n    if (i != 0) jsonstr += ' , '\n    jsonstr += '\"' + cols[i] + '\":\"' + row[i] + '\"'\n  }\n  jsonstr += '}'\n  return JSON.parse(jsonstr)\n}\n\nexport default {\n  components: {\n    ElButton, ElInput, ElTable, ElTableColumn, ElForm, ElFormItem\n  },\n  data() {\n    return {\n      SQLStatement: '',\n      rows: [],\n      cols: [],\n    }\n  },\n  methods: {\n    execute() {\n      if (this.SQLStatement.trim().length == 0) {\n        ElMessage.error('SQL语句不能为空')\n        return\n      } else {\n        this.axios.get('/api/sql', {\n          params: {\n            sql: this.SQLStatement\n          }\n        }).then((response) => {\n          ElMessage.success('操作成功')\n          // Process data, make it accetable for element-plus\n          // Avoid inconsistent data with a temporary variable\n          var _table = {\n            cols: [],\n            rows: []\n          }\n          // Generate column data\n          _table.cols = response.data.columnInfos.map((item) => {\n            return item.name\n          })\n          // Generate rows\n          // 'of' not 'in', the latter uses indexes\n          for(var row of response.data.rows) {\n            _table.rows.push(combineJSON(_table.cols, row))\n          }\n          // Apply changes\n          this.rows = _table.rows\n          this.cols = _table.cols\n        }).catch((err) => {\n          ElMessage.error('操作失败：' + err.response.data)\n          console.log('错误细节：\\n' + err + '\\n' + err.response.data)\n        })\n      }\n    }\n  }\n}\n</script>\n"]}]}