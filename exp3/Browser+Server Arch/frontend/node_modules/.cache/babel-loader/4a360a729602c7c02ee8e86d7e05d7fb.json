{"remainingRequest":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/babel-loader/lib/index.js!/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue?vue&type=template&id=f2aae5e6","dependencies":[{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue","mtime":1638102484272},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/babel.config.js","mtime":1637896006000},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1638090762101},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/babel-loader/lib/index.js","mtime":1638090762809},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1638090763449},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1638090762101},{"path":"/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1638090762770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgd2l0aE1vZGlmaWVycyBhcyBfd2l0aE1vZGlmaWVycywgd2l0aEtleXMgYXMgX3dpdGhLZXlzLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSB9IGZyb20gInZ1ZSI7Cgp2YXIgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLmiafooYwiKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfZWxfdGFibGVfY29sdW1uID0gX3Jlc29sdmVDb21wb25lbnQoImVsLXRhYmxlLWNvbHVtbiIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF90YWJsZSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC10YWJsZSIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF9pbnB1dCA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1pbnB1dCIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZm9ybS1pdGVtIik7CgogIHZhciBfY29tcG9uZW50X2VsX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1idXR0b24iKTsKCiAgdmFyIF9jb21wb25lbnRfZWxfZm9ybSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1mb3JtIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdGFibGUsIHsKICAgIGRhdGE6ICRkYXRhLnJvd3MsCiAgICBzdHlsZTogewogICAgICAibWFyZ2luIjogIjIwcHgiCiAgICB9CiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJGRhdGEuY29scywgZnVuY3Rpb24gKGNvbCkgewogICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3RhYmxlX2NvbHVtbiwgewogICAgICAgICAga2V5OiBjb2wsCiAgICAgICAgICBwcm9wOiBjb2wsCiAgICAgICAgICBsYWJlbDogY29sCiAgICAgICAgfSwgbnVsbCwgOAogICAgICAgIC8qIFBST1BTICovCiAgICAgICAgLCBbInByb3AiLCAibGFiZWwiXSk7CiAgICAgIH0pLCAxMjgKICAgICAgLyogS0VZRURfRlJBR01FTlQgKi8KICAgICAgKSldOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSwgOAogIC8qIFBST1BTICovCiAgLCBbImRhdGEiXSksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiBEZWZhdWx0IGJlaGF2aW9yIG9mIG5hdGl2ZSBlbnRlciBldmVudCBpcyByZWZyZXNoLiBXZSdkIHRvIHByZXZlbnQgaXQgIiksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiBEQU1OIFdISUNIIEYqKkNLSU5HIElESU9UIERFU0lHTkVEIFRISVMgU1RVUElEIEJFSEFWSU9SPyEgIiksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm0sIHsKICAgIHN0eWxlOiB7CiAgICAgICJtYXJnaW4iOiAiMHB4IDIwcHggMjBweCAyMHB4IgogICAgfQogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICBsYWJlbDogIlNRTOivreWPpSIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgbW9kZWxWYWx1ZTogJGRhdGEuU1FMU3RhdGVtZW50LAogICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiAkZGF0YS5TUUxTdGF0ZW1lbnQgPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBwbGFjZWhvbGRlcjogIuWcqOatpOi+k+WFpVNRTOivreWPpe+8jOaMieS4i0N0cmwrRW50ZXLmiafooYwiLAogICAgICAgICAgICB0eXBlOiAidGV4dGFyZWEiLAogICAgICAgICAgICByZXNpemU6ICJub25lIiwKICAgICAgICAgICAgYXV0b3NpemU6IHsKICAgICAgICAgICAgICBtaW5Sb3dzOiA0LAogICAgICAgICAgICAgIG1heFJvd3M6IDEyOAogICAgICAgICAgICB9LAogICAgICAgICAgICBvbktleWRvd246IF93aXRoS2V5cyhfd2l0aE1vZGlmaWVycygkb3B0aW9ucy5leGVjdXRlLCBbImN0cmwiXSksIFsiZW50ZXIiXSkKICAgICAgICAgIH0sIG51bGwsIDgKICAgICAgICAgIC8qIFBST1BTICovCiAgICAgICAgICAsIFsibW9kZWxWYWx1ZSIsICJvbktleWRvd24iXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIG51bGwsIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICAgICAgICBvbkNsaWNrOiAkb3B0aW9ucy5leGVjdXRlCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gW19ob2lzdGVkXzFdOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgICAgICB9LCA4CiAgICAgICAgICAvKiBQUk9QUyAqLwogICAgICAgICAgLCBbIm9uQ2xpY2siXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgIH0pXTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0pXSwgNjQKICAvKiBTVEFCTEVfRlJBR01FTlQgKi8KICApOwp9"},{"version":3,"sources":["/Users/kk/Desktop/db/exp3/Browser+Server Arch/frontend/src/components/QueryView.vue"],"names":[],"mappings":";;+CAsBkC,I;;;;;;;;;;;;;;;6DArBhC,YAAA,CAMW,mBANX,EAMW;AANA,IAAA,IAAI,EAAE,KAAA,CAAA,IAMN;AANY,IAAA,KAAmB,EAAnB;AAAA,gBAAA;AAAA;AAMZ,GANX,E;sBACmB;AAAA,aAAmB,E,kBAApC,mBAAA,CAIE,SAJF,EAIE,IAJF,EAIE,WAAA,CAJ6B,KAAA,CAAA,IAI7B,EAJiC,UAAX,GAAW,EAAR;6BAA3B,YAAA,CAIE,0BAJF,EAIE;AAHC,UAAA,GAAG,EAAE,GAGN;AAFC,UAAA,IAAI,EAAE,GAEP;AADC,UAAA,KAAK,EAAE;AACR,SAJF,E,IAAA,E;;AAAA,U,iBAAA,C;OAIE,CAJF,E;;AAAA,OAAoC,EAAnB;AAAA,K;;;;GADnB,E;;AAAA,I,QAAA,C,EAQA,mBAAA,CAAA,yEAAA,C,EACA,mBAAA,CAAA,6DAAA,C,EACA,YAAA,CAaU,kBAbV,EAaU;AAbD,IAAA,KAAiC,EAAjC;AAAA,gBAAA;AAAA;AAaC,GAbV,EAA0C;sBACxC;AAAA,aAQe,CARf,YAAA,CAQe,uBARf,EAQe;AARD,QAAA,KAAK,EAAC;AAQL,OARf,EAA2B;0BACzB;AAAA,iBAME,CANF,YAAA,CAME,mBANF,EAME;wBANiB,KAAA,CAAA,YAMjB;;qBANiB,KAAA,CAAA,Y,GAAY,M;cAM7B;AALA,YAAA,WAAW,EAAC,0BAKZ;AAJA,YAAA,IAAI,EAAC,UAIL;AAHA,YAAA,MAAM,EAAC,MAGP;AAFC,YAAA,QAAQ,EAAE;AAAA,cAAA,OAAA,EAAA,CAAA;AAAA,cAAA,OAAA,EAAA;AAAA,aAEX;AADC,YAAA,SAAO,EAAA,SAAA,CAAA,cAAA,CAAa,QAAA,CAAA,OAAb,EAAoB,CAAA,MAAA,CAApB,CAAA,EAAoB,CAAA,OAAA,CAApB;AACR,WANF,E,IAAA,E;;AAAA,Y,2BAAA,CAME,CANF;AAAA,S,CADyB;;;;AAAA,OAA3B,CAQe,EACf,YAAA,CAEe,uBAFf,EAEe,IAFf,EAEe;0BADb;AAAA,iBAA0C,CAA1C,YAAA,CAA0C,oBAA1C,EAA0C;AAA9B,YAAA,OAAK,EAAE,QAAA,CAAA;AAAuB,WAA1C,EAA0B;8BAAE;AAAA,qBAAE,C,UAAA,CAAF;AAAA,a,CAAF;;;;AAAA,WAA1B,E;;AAAA,Y,WAAA,CAA0C,CAA1C;AAAA,S,CACa;;;;AAAA,OAFf,CADe,CARf;AAAA,K,CADwC;;;;AAAA,GAA1C,C","sourcesContent":["<template>\n  <el-table :data='rows' style='margin:20px'>\n    <el-table-column v-for='col in cols'\n      :key='col'\n      :prop='col'\n      :label='col'\n    />\n  </el-table>\n\n  <!-- Default behavior of native enter event is refresh. We'd to prevent it -->\n  <!-- DAMN WHICH F**CKING IDIOT DESIGNED THIS STUPID BEHAVIOR?! -->\n  <el-form style='margin:0px 20px 20px 20px'>\n    <el-form-item label='SQL语句'>\n      <el-input v-model='SQLStatement'\n        placeholder='在此输入SQL语句，按下Ctrl+Enter执行'\n        type='textarea'\n        resize='none'\n        :autosize='{ minRows:4, maxRows: 128 }'\n        @keydown.enter.ctrl='execute'\n      />\n    </el-form-item>\n    <el-form-item>\n      <el-button @click='execute'>执行</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { ElButton, ElInput, ElTable, ElTableColumn, ElForm, ElFormItem, ElMessage } from 'element-plus'\n\n// combine 2 arrays of strings as a json object\nfunction combineJSON(cols, row) {\n  var jsonstr = '{';\n  var i = 0;\n  const sz = cols.length\n  for (; i < sz; ++i) {\n    if (i != 0) jsonstr += ' , '\n    jsonstr += '\"' + cols[i] + '\":\"' + row[i] + '\"'\n  }\n  jsonstr += '}'\n  return JSON.parse(jsonstr)\n}\n\nexport default {\n  components: {\n    ElButton, ElInput, ElTable, ElTableColumn, ElForm, ElFormItem\n  },\n  data() {\n    return {\n      SQLStatement: '',\n      rows: [],\n      cols: [],\n    }\n  },\n  methods: {\n    execute() {\n      if (this.SQLStatement.trim().length == 0) {\n        ElMessage.error('SQL语句不能为空')\n        return\n      } else {\n        this.axios.get('/api/sql', {\n          params: {\n            sql: this.SQLStatement\n          }\n        }).then((response) => {\n          ElMessage.success('操作成功')\n          // Process data, make it accetable for element-plus\n          // Avoid inconsistent data with a temporary variable\n          var _table = {\n            cols: [],\n            rows: []\n          }\n          // Generate column data\n          _table.cols = response.data.columnInfos.map((item) => {\n            return item.name\n          })\n          // Generate rows\n          // 'of' not 'in', the latter uses indexes\n          for(var row of response.data.rows) {\n            _table.rows.push(combineJSON(_table.cols, row))\n          }\n          // Apply changes\n          this.rows = _table.rows\n          this.cols = _table.cols\n        }).catch((err) => {\n          ElMessage.error('操作失败：' + err.response.data)\n          console.log('错误细节：\\n' + err + '\\n' + err.response.data)\n        })\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":""}]}